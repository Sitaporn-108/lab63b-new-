#  การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล

##  วัตถุประสงค์
   1. เพื่อศึกษาการทำงานของโปรแกรมอินพุทสัญญาณดิจิทัล
   
##  อุปกรณ์ที่ใช้ (รายการอุปกรณ์)
   1. CPU
   2. Adapter
   3. Sensorแสง
   4. หลอด LED เปล่งแสง
   5. ไมโครคอนโทรเลอร์ ชื่อ ESP-01
   6. อุปกรณ์เชื่อมต่อ USB เข้าไปสู่ serial

##  ศึกษาข้อมูลเบื้องต้น (แหล่งข้อมูลเพื่อการศึกษา)
    https://youtu.be/nFqoZT26U5k

##  วิธีการทำการทดลอง
   1. พิมพ์ **pwd** เพื่อเข้าสู่โปรแกรมตัวอย่างที่ 4 และพิมพ์ **cd ../04_Input-Port** กับพิมพ์ **1s**
   2. พิมพ์ **vi src/main.cpp** กับพิมพ์ **pwd**
   3. พิมพ์ **vi src/main.cpp** เพื่อเข้าสู่โปรแกรม
      - รูป
   4. โปรแกรมแบ่งเป็น 2 ส่วน
      - ส่วนที่ 1 **void set up** ซึ่งมี 2 Port โดยจัดให้ Port 0 (สายขาว) : Input และ Port 2(สายเหลือง) : Output
      - ส่วนที่ 2 **void loop** อ่านข้อมูลจาก Port0 แสดงผล 0 (ไฟสว่าง) หรือ 1 (ไฟดับ)
      - รูป
      - พิมพ์ **:q** เพื่อออก
	   - *เนื้อหารายละเอียดของโปรแกรมที่แสดงใน platformio*
```javascript
#include <Arduino.h>
#include <ESP8266WiFi.h>

int cnt = 0;

void setup()
{
	Serial.begin(115200);
	pinMode(0, INPUT);
	pinMode(2, OUTPUT);
	Serial.println("\n\n\n");
}

void loop()
{
	int val = digitalRead(0);
	Serial.printf("======= read %d\n", val);
	if(val==1) {
		digitalWrite(2, LOW);
	} else {
		digitalWrite(2, HIGH);
	}
	delay(100);
}

© 2021 GitHub, Inc.
```
   5. อัปโหลดโปรแกรม 04_Input-Port เข้าไปยังไมโครคอนโทรเลอร์
      - พิมพ์ **pio run -t upload** เพื่ออัปโหลด
      - รูป
      - ขณะที่โปรแกรมรันการอัปโหลด ต้องกดปุ่มดำ(load)  และปุ่มแดง(reset) ที่ไมโครคอนโทรเลอร์ เพื่อรับโปรแกรมใหม่เข้าไป
   6.เมื่ออัปโหลดเสร็จสิ้น 
      - พิมพ์ **pio device monitor** เพื่อเช็คผลลัพธ์
   7. นำ เซนเซอร์แสงที่ต่อกับตัวต้านทาน ขาแรกต่อกับไฟเลี้ยง (ช่องสายแดง) ขากลางต่อกับ Port 0 (ช่องสายขาว) ขาสุดท้ายต่อกับground (ช่องสายดำ)
      - ทำการบันทึกผลการทดลอง

##  การบันทึกผลการทดลอง
เมื่อทำการอัปโหลดโปรแกรมลงไมโครคอนโทรเลอร์ พบว่า 
   * ขณะที่สายขาว Port0 ไม่ได้จิ้มกับสายดำ โปรแกรมแสดงผล **read 1** และหลอด LED ไฟไม่สว่าง 
   * ขณะที่สายเหลือง Port1 ได้จิ้มกับสายดำ โปรแกรมแสดงผล **read 0** และหลอด LED ไฟสว่าง
   * เมื่อกดปุ่มดำที่ไมโครคอนโทรเลอร์ พบว่า โปรแกรมแสดงผล **read 0** และหลอด LED ไฟสว่าง

เมื่อต่อเซนเซอร์แสงเข้ากับไมโครคอนโทรเลอร์ พบว่า
   * ขณะที่หันเซนเซอร์เข้าหาแสง โปรแกรมแสดงผล **read 0** และหลอด LED ไฟสว่าง
   * ขณะที่เอานิ้วปิดเซนเซอร์เพื่อบังแสง โปรแกรมแสดงผล **read 1** และหลอด LED ไฟไม่สว่าง 
   
##  อภิปรายผลการทดลอง
   * จากการทดลอง เมื่อโค้ดที่ถูกอ่านมีค่าเป็น 0 หมายถึง หลอดไฟจะสว่าง ในขณะเดียวกัน เมื่อค่าที่ถูกอ่านเป็น 1 หลอดไฟจะดับ
   * เมื่อทำการต่อ sensorแสง หากตัวsensorถูกบดบัง ค่าจะถูกอ่านเป็น 1 หลอดไฟจะดับ ในขณะเดียวกัน เมื่อsensorแสงไม่ถูกบัง หลอดไฟจะสว่าง

##  คำถามหลังการทดลอง
**คำถาม**   
* **คำตอบ**
